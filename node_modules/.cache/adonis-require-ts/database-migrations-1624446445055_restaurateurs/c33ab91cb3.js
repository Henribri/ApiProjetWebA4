"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Schema_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Schema"));
class Restaurateurs extends Schema_1.default {
    constructor() {
        super(...arguments);
        this.tableName = 'restaurateurs';
    }
    async up() {
        this.schema.alterTable(this.tableName, (table) => {
            table.renameColumn('restaurateur_id', 'restorer_id');
            table.string('restorer_name').notNullable();
            table.dropColumn('restaurateur_name');
            table.dropColumn('restaurateur_lastname');
            table.dropColumn('restaurateur_password');
            table.dropColumn('restaurateur_email');
            table.dropColumn('restaurateur_restaurant_name');
            table.dropColumn('restaurateur_phone_number');
            table.dropColumn('restaurateur_fk_parrain_id');
            table.dropColumn('restaurateur_fk_filleul_id');
            table.dropColumn('restaurateur_fk_refresh_token');
            table.renameColumn('restaurateur_fk_address_id', 'fk_address_id');
        });
        this.schema.renameTable(this.tableName, 'restorer');
    }
    async down() {
        this.schema.renameTable('restorer', this.tableName);
        this.schema.alterTable(this.tableName, (table) => {
            table.renameColumn('restorer_id', 'restaurateur_id');
            table.string('restorer_name').notNullable();
            table.string('restaurateur_name').notNullable();
            table.string('restaurateur_lastname').notNullable();
            table.string('restaurateur_password').notNullable();
            table.string('restaurateur_email').notNullable();
            table.string('restaurateur_restaurant_name').notNullable();
            table.string('restaurateur_phone_number').notNullable();
            table.integer('restaurateur_fk_parrain_id').references('user_id').inTable('users');
            table.integer('restaurateur_fk_filleul_id').references('user_id').inTable('users');
            table.integer('restaurateur_fk_refresh_token').references('refresh_token_id').inTable('refresh_token');
            table.renameColumn('fk_address_id', 'restaurateur_fk_address_id');
        });
        this.schema.renameTable(this.tableName, 'restorer');
    }
}
exports.default = Restaurateurs;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYyNDQ0NjQ0NTA1NV9yZXN0YXVyYXRldXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiMTYyNDQ0NjQ0NTA1NV9yZXN0YXVyYXRldXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdUZBQWlEO0FBRWpELE1BQXFCLGFBQWMsU0FBUSxnQkFBVTtJQUFyRDs7UUFDWSxjQUFTLEdBQUcsZUFBZSxDQUFBO0lBMEN2QyxDQUFDO0lBeENRLEtBQUssQ0FBQyxFQUFFO1FBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBRS9DLEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQWlCLEVBQUMsYUFBYSxDQUFDLENBQUE7WUFDbkQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMzQyxLQUFLLENBQUMsVUFBVSxDQUFDLG1CQUFtQixDQUFDLENBQUE7WUFDckMsS0FBSyxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFBO1lBQ3pDLEtBQUssQ0FBQyxVQUFVLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtZQUN6QyxLQUFLLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLENBQUE7WUFDdEMsS0FBSyxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFBO1lBQ2hELEtBQUssQ0FBQyxVQUFVLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtZQUM3QyxLQUFLLENBQUMsVUFBVSxDQUFDLDRCQUE0QixDQUFDLENBQUE7WUFDOUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO1lBQzlDLEtBQUssQ0FBQyxVQUFVLENBQUMsK0JBQStCLENBQUMsQ0FBQTtZQUNqRCxLQUFLLENBQUMsWUFBWSxDQUFDLDRCQUE0QixFQUFDLGVBQWUsQ0FBQyxDQUFBO1FBRWxFLENBQUMsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtJQUNwRCxDQUFDO0lBRU0sS0FBSyxDQUFDLElBQUk7UUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBRSxDQUFBO1FBQ25ELElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUUvQyxLQUFLLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBQyxpQkFBaUIsQ0FBQyxDQUFBO1lBQ25ELEtBQUssQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDM0MsS0FBSyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQy9DLEtBQUssQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUNuRCxLQUFLLENBQUMsTUFBTSxDQUFDLHVCQUF1QixDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDbkQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ2hELEtBQUssQ0FBQyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMxRCxLQUFLLENBQUMsTUFBTSxDQUFDLDJCQUEyQixDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDdkQsS0FBSyxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDbEYsS0FBSyxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDbEYsS0FBSyxDQUFDLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQTtZQUN0RyxLQUFLLENBQUMsWUFBWSxDQUFDLGVBQWUsRUFBQyw0QkFBNEIsQ0FBQyxDQUFBO1FBRWxFLENBQUMsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtJQUNwRCxDQUFDO0NBQ0Y7QUEzQ0QsZ0NBMkNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VTY2hlbWEgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvU2NoZW1hJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXN0YXVyYXRldXJzIGV4dGVuZHMgQmFzZVNjaGVtYSB7XG4gIHByb3RlY3RlZCB0YWJsZU5hbWUgPSAncmVzdGF1cmF0ZXVycydcblxuICBwdWJsaWMgYXN5bmMgdXAgKCkge1xuICAgIHRoaXMuc2NoZW1hLmFsdGVyVGFibGUodGhpcy50YWJsZU5hbWUsICh0YWJsZSkgPT4ge1xuXG4gICAgICB0YWJsZS5yZW5hbWVDb2x1bW4oJ3Jlc3RhdXJhdGV1cl9pZCcsJ3Jlc3RvcmVyX2lkJylcbiAgICAgIHRhYmxlLnN0cmluZygncmVzdG9yZXJfbmFtZScpLm5vdE51bGxhYmxlKClcbiAgICAgIHRhYmxlLmRyb3BDb2x1bW4oJ3Jlc3RhdXJhdGV1cl9uYW1lJylcbiAgICAgIHRhYmxlLmRyb3BDb2x1bW4oJ3Jlc3RhdXJhdGV1cl9sYXN0bmFtZScpXG4gICAgICB0YWJsZS5kcm9wQ29sdW1uKCdyZXN0YXVyYXRldXJfcGFzc3dvcmQnKVxuICAgICAgdGFibGUuZHJvcENvbHVtbigncmVzdGF1cmF0ZXVyX2VtYWlsJylcbiAgICAgIHRhYmxlLmRyb3BDb2x1bW4oJ3Jlc3RhdXJhdGV1cl9yZXN0YXVyYW50X25hbWUnKVxuICAgICAgdGFibGUuZHJvcENvbHVtbigncmVzdGF1cmF0ZXVyX3Bob25lX251bWJlcicpXG4gICAgICB0YWJsZS5kcm9wQ29sdW1uKCdyZXN0YXVyYXRldXJfZmtfcGFycmFpbl9pZCcpXG4gICAgICB0YWJsZS5kcm9wQ29sdW1uKCdyZXN0YXVyYXRldXJfZmtfZmlsbGV1bF9pZCcpXG4gICAgICB0YWJsZS5kcm9wQ29sdW1uKCdyZXN0YXVyYXRldXJfZmtfcmVmcmVzaF90b2tlbicpXG4gICAgICB0YWJsZS5yZW5hbWVDb2x1bW4oJ3Jlc3RhdXJhdGV1cl9ma19hZGRyZXNzX2lkJywnZmtfYWRkcmVzc19pZCcpXG5cbiAgICB9KVxuICAgIHRoaXMuc2NoZW1hLnJlbmFtZVRhYmxlKHRoaXMudGFibGVOYW1lLCdyZXN0b3JlcicpXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZG93biAoKSB7XG4gICAgdGhpcy5zY2hlbWEucmVuYW1lVGFibGUoJ3Jlc3RvcmVyJyx0aGlzLnRhYmxlTmFtZSwpXG4gICAgdGhpcy5zY2hlbWEuYWx0ZXJUYWJsZSh0aGlzLnRhYmxlTmFtZSwgKHRhYmxlKSA9PiB7XG5cbiAgICAgIHRhYmxlLnJlbmFtZUNvbHVtbigncmVzdG9yZXJfaWQnLCdyZXN0YXVyYXRldXJfaWQnKVxuICAgICAgdGFibGUuc3RyaW5nKCdyZXN0b3Jlcl9uYW1lJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCdyZXN0YXVyYXRldXJfbmFtZScpLm5vdE51bGxhYmxlKClcbiAgICAgIHRhYmxlLnN0cmluZygncmVzdGF1cmF0ZXVyX2xhc3RuYW1lJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCdyZXN0YXVyYXRldXJfcGFzc3dvcmQnKS5ub3ROdWxsYWJsZSgpXG4gICAgICB0YWJsZS5zdHJpbmcoJ3Jlc3RhdXJhdGV1cl9lbWFpbCcpLm5vdE51bGxhYmxlKClcbiAgICAgIHRhYmxlLnN0cmluZygncmVzdGF1cmF0ZXVyX3Jlc3RhdXJhbnRfbmFtZScpLm5vdE51bGxhYmxlKClcbiAgICAgIHRhYmxlLnN0cmluZygncmVzdGF1cmF0ZXVyX3Bob25lX251bWJlcicpLm5vdE51bGxhYmxlKClcbiAgICAgIHRhYmxlLmludGVnZXIoJ3Jlc3RhdXJhdGV1cl9ma19wYXJyYWluX2lkJykucmVmZXJlbmNlcygndXNlcl9pZCcpLmluVGFibGUoJ3VzZXJzJylcbiAgICAgIHRhYmxlLmludGVnZXIoJ3Jlc3RhdXJhdGV1cl9ma19maWxsZXVsX2lkJykucmVmZXJlbmNlcygndXNlcl9pZCcpLmluVGFibGUoJ3VzZXJzJylcbiAgICAgIHRhYmxlLmludGVnZXIoJ3Jlc3RhdXJhdGV1cl9ma19yZWZyZXNoX3Rva2VuJykucmVmZXJlbmNlcygncmVmcmVzaF90b2tlbl9pZCcpLmluVGFibGUoJ3JlZnJlc2hfdG9rZW4nKVxuICAgICAgdGFibGUucmVuYW1lQ29sdW1uKCdma19hZGRyZXNzX2lkJywncmVzdGF1cmF0ZXVyX2ZrX2FkZHJlc3NfaWQnKVxuXG4gICAgfSlcbiAgICB0aGlzLnNjaGVtYS5yZW5hbWVUYWJsZSh0aGlzLnRhYmxlTmFtZSwncmVzdG9yZXInKVxuICB9XG59XG4iXX0=