"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Command_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Command"));
class CommandsController {
    async get_command({ request }) {
        return await Command_1.default.findOne({ _id: request.input('command_id') });
    }
    async create({ request }) {
        const command = new Command_1.default(request.body());
        command.save();
    }
    async edit({ request }) {
        await Command_1.default.updateOne({ _id: request.input('command_id') }, request.body());
    }
    async delete({ request }) {
        await Command_1.default.deleteOne({ _id: request.input('command_id') });
    }
    async pay({ request }) {
        await Command_1.default.updateOne({ _id: request.input('command_id') }, request.body());
    }
    async get_historic({ request }) {
        const historic = await Command_1.default.find({ 'client.id': request.input('client_id') });
        return historic;
    }
    async delete_historic({ request }) {
        await Command_1.default.deleteOne({ _id: { $in: request.body().delete_historic } });
    }
}
exports.default = CommandsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tbWFuZHNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ29tbWFuZHNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsdUZBQXlDO0FBSXpDLE1BQXFCLGtCQUFrQjtJQUc1QixLQUFLLENBQUMsV0FBVyxDQUFFLEVBQUMsT0FBTyxFQUFDO1FBRS9CLE9BQU8sTUFBTSxpQkFBTyxDQUFDLE9BQU8sQ0FBQyxFQUFDLEdBQUcsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFDLENBQUMsQ0FBQTtJQUVuRSxDQUFDO0lBRU0sS0FBSyxDQUFDLE1BQU0sQ0FBRSxFQUFDLE9BQU8sRUFBQztRQUUxQixNQUFNLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDM0MsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ2xCLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSSxDQUFFLEVBQUMsT0FBTyxFQUFDO1FBRXhCLE1BQU0saUJBQU8sQ0FBQyxTQUFTLENBQUMsRUFBQyxHQUFHLEVBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBQyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBRzlFLENBQUM7SUFFTSxLQUFLLENBQUMsTUFBTSxDQUFFLEVBQUMsT0FBTyxFQUFDO1FBRTFCLE1BQU0saUJBQU8sQ0FBQyxTQUFTLENBQUMsRUFBQyxHQUFHLEVBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBQyxDQUFDLENBQUE7SUFFOUQsQ0FBQztJQUVNLEtBQUssQ0FBQyxHQUFHLENBQUUsRUFBQyxPQUFPLEVBQUM7UUFFdkIsTUFBTSxpQkFBTyxDQUFDLFNBQVMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFDLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7SUFFOUUsQ0FBQztJQUVNLEtBQUssQ0FBQyxZQUFZLENBQUUsRUFBQyxPQUFPLEVBQUM7UUFFaEMsTUFBTSxRQUFRLEdBQUcsTUFBTSxpQkFBTyxDQUFDLElBQUksQ0FBQyxFQUFDLFdBQVcsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFDLENBQUMsQ0FBQTtRQUU3RSxPQUFPLFFBQVEsQ0FBQTtJQUduQixDQUFDO0lBRU0sS0FBSyxDQUFDLGVBQWUsQ0FBRSxFQUFDLE9BQU8sRUFBQztRQUVuQyxNQUFNLGlCQUFPLENBQUMsU0FBUyxDQUFDLEVBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxlQUFlLEVBQUMsRUFBQyxDQUFDLENBQUE7SUFFMUUsQ0FBQztDQUNKO0FBaERELHFDQWdEQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xyXG5pbXBvcnQgQ29tbWFuZCBmcm9tIFwiQXBwL01vZGVscy9Db21tYW5kXCI7XHJcbmltcG9ydCB7IHJlcSB9IGZyb20gXCJwaW5vLXN0ZC1zZXJpYWxpemVyc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1hbmRzQ29udHJvbGxlciB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRfY29tbWFuZCAoe3JlcXVlc3R9KXtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IENvbW1hbmQuZmluZE9uZSh7X2lkOnJlcXVlc3QuaW5wdXQoJ2NvbW1hbmRfaWQnKX0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGUgKHtyZXF1ZXN0fSl7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgQ29tbWFuZChyZXF1ZXN0LmJvZHkoKSkgICAgXHJcbiAgICAgICAgY29tbWFuZC5zYXZlKClcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGFzeW5jIGVkaXQgKHtyZXF1ZXN0fSl7XHJcblxyXG4gICAgICAgIGF3YWl0IENvbW1hbmQudXBkYXRlT25lKHtfaWQ6cmVxdWVzdC5pbnB1dCgnY29tbWFuZF9pZCcpfSwgcmVxdWVzdC5ib2R5KCkpXHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZWxldGUgKHtyZXF1ZXN0fSl7XHJcblxyXG4gICAgICAgIGF3YWl0IENvbW1hbmQuZGVsZXRlT25lKHtfaWQ6cmVxdWVzdC5pbnB1dCgnY29tbWFuZF9pZCcpfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHBheSAoe3JlcXVlc3R9KXtcclxuXHJcbiAgICAgICAgYXdhaXQgQ29tbWFuZC51cGRhdGVPbmUoe19pZDpyZXF1ZXN0LmlucHV0KCdjb21tYW5kX2lkJyl9LCByZXF1ZXN0LmJvZHkoKSlcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0X2hpc3RvcmljICh7cmVxdWVzdH0pe1xyXG5cclxuICAgICAgICBjb25zdCBoaXN0b3JpYyA9IGF3YWl0IENvbW1hbmQuZmluZCh7J2NsaWVudC5pZCc6cmVxdWVzdC5pbnB1dCgnY2xpZW50X2lkJyl9KVxyXG5cclxuICAgICAgICByZXR1cm4gaGlzdG9yaWNcclxuXHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVsZXRlX2hpc3RvcmljICh7cmVxdWVzdH0pe1xyXG5cclxuICAgICAgICBhd2FpdCBDb21tYW5kLmRlbGV0ZU9uZSh7X2lkOiB7ICRpbjogcmVxdWVzdC5ib2R5KCkuZGVsZXRlX2hpc3RvcmljfX0pXHJcbiAgICBcclxuICAgIH1cclxufVxyXG4iXX0=