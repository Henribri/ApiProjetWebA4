"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Article_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Article"));
class ArticlesController {
    async getOneArticle({ request, response }) {
        try {
            return await Article_1.default.findOne({ _id: request.input('article_id') });
        }
        catch (err) {
            return response.status(502);
        }
    }
    async getAllArticles({ response }) {
        try {
            return await Article_1.default.find();
        }
        catch (err) {
            return response.status(502);
        }
    }
    async getArticlesByType({ request, response }) {
        try {
            return await Article_1.default.find({ type: request.input('article_type') });
        }
        catch (err) {
            return response.status(502);
        }
    }
    async getArticlesByRestorer({ request, response }) {
        try {
            return await Article_1.default.find({ restorer: request.input("restorer_id") });
        }
        catch (err) {
            return response.status(502);
        }
    }
    async createArticle({ request, response }) {
        try {
            await Article_1.default.create(request.body());
            return response.ok("Article created");
        }
        catch (err) {
            return response.status(err);
        }
    }
    async editArticle({ request, response }) {
        try {
            await Article_1.default.updateOne({ _id: request.input('article_id') }, request.body());
            return response.ok("Article edited");
        }
        catch (err) {
            return response.status(502);
        }
    }
    async deleteArticle({ request, response }) {
        try {
            await Article_1.default.deleteOne({ _id: request.input('article_id') });
            return response.ok("Article deleted");
        }
        catch (err) {
            return response.status(502);
        }
    }
}
exports.default = ArticlesController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJ0aWNsZXNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQXJ0aWNsZXNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsdUZBQXdDO0FBQ3hDLE1BQXFCLGtCQUFrQjtJQWEzQixLQUFLLENBQUMsYUFBYSxDQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBcUI7UUFDaEUsSUFBSTtZQUNBLE9BQU8sTUFBTSxpQkFBTyxDQUFDLE9BQU8sQ0FBQyxFQUFDLEdBQUcsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFDLENBQUMsQ0FBQTtTQUNsRTtRQUFBLE9BQU0sR0FBRyxFQUFDO1lBQ1AsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQzlCO0lBQ0wsQ0FBQztJQVNNLEtBQUssQ0FBQyxjQUFjLENBQUUsRUFBQyxRQUFRLEVBQXNCO1FBQ3hELElBQUc7WUFDQyxPQUFPLE1BQU0saUJBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtTQUM5QjtRQUFBLE9BQU0sR0FBRyxFQUFDO1lBQ1AsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQzlCO0lBQ0wsQ0FBQztJQVdNLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQXVCO1FBQ3BFLElBQUc7WUFDQyxPQUFPLE1BQU0saUJBQU8sQ0FBQyxJQUFJLENBQUMsRUFBQyxJQUFJLEVBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsRUFBQyxDQUFDLENBQUE7U0FDbEU7UUFBQSxPQUFNLEdBQUcsRUFBQztZQUNQLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUM5QjtJQUNMLENBQUM7SUFXTSxLQUFLLENBQUMscUJBQXFCLENBQUUsRUFBQyxPQUFPLEVBQUUsUUFBUSxFQUFxQjtRQUN2RSxJQUFHO1lBQ0MsT0FBTyxNQUFNLGlCQUFPLENBQUMsSUFBSSxDQUFDLEVBQUMsUUFBUSxFQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUMsQ0FBQyxDQUFBO1NBQ3JFO1FBQUEsT0FBTSxHQUFHLEVBQUM7WUFDUCxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDOUI7SUFDTCxDQUFDO0lBV00sS0FBSyxDQUFDLGFBQWEsQ0FBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQXFCO1FBQy9ELElBQUc7WUFDQyxNQUFNLGlCQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO1lBQ3BDLE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFBO1NBQ3hDO1FBQUEsT0FBTSxHQUFHLEVBQUM7WUFDUCxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDOUI7SUFFTCxDQUFDO0lBWU0sS0FBSyxDQUFDLFdBQVcsQ0FBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQXFCO1FBQzdELElBQUc7WUFDQyxNQUFNLGlCQUFPLENBQUMsU0FBUyxDQUFDLEVBQUMsR0FBRyxFQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEVBQUMsRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtZQUMxRSxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtTQUN2QztRQUFBLE9BQU0sR0FBRyxFQUFDO1lBQ1AsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQzlCO0lBQ0wsQ0FBQztJQVVNLEtBQUssQ0FBQyxhQUFhLENBQUUsRUFBQyxPQUFPLEVBQUUsUUFBUSxFQUFxQjtRQUMvRCxJQUFHO1lBQ0MsTUFBTSxpQkFBTyxDQUFDLFNBQVMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFDLENBQUMsQ0FBQTtZQUMxRCxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtTQUN4QztRQUFBLE9BQU0sR0FBRyxFQUFDO1lBQ1AsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQzlCO0lBRUwsQ0FBQztDQU9KO0FBbklELHFDQW1JQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xyXG5pbXBvcnQgQXJ0aWNsZSBmcm9tICdBcHAvTW9kZWxzL0FydGljbGUnXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFydGljbGVzQ29udHJvbGxlciB7XHJcblxyXG5cclxuICAgIFxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBhcGkge2dldH0gL2dldF9vbmVfYXJ0aWNsZSBSZXF1ZXN0IGFydGljbGUgaW5mb3JtYXRpb25cclxuICAgICAqIEBhcGlOYW1lIGdldE9uZUFydGljbGVcclxuICAgICAqIEBhcGlHcm91cCBBcnRpY2xlXHJcbiAgICAgKiBAYXBpUGFyYW0ge1N0cmluZ30gYXJ0aWNsZV9pZCBJZCBvZiBhcnRpY2xlLlxyXG4gICAgICogQGFwaVN1Y2Nlc3Mge09iamVjdH0gYXJ0aWNsZSBBcnRpY2xlIG9iamVjdC5cclxuICAgICAqIEBhcGlFcnJvciAoNTAyKSBFcnJvciBFcnJvciB0byByZXF1ZXN0IGRhdGFiYXNlLlxyXG4gICAgICovXHJcbiAgICAgcHVibGljIGFzeW5jIGdldE9uZUFydGljbGUgKHtyZXF1ZXN0LCByZXNwb25zZX06SHR0cENvbnRleHRDb250cmFjdCl7XHJcbiAgICAgICAgdHJ5IHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEFydGljbGUuZmluZE9uZSh7X2lkOnJlcXVlc3QuaW5wdXQoJ2FydGljbGVfaWQnKX0pXHJcbiAgICAgICAgfWNhdGNoKGVycil7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAyKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBAYXBpIHtnZXR9IC9nZXRfYWxsX2FydGljbGUgUmVxdWVzdCBhbGwgYXJ0aWNsZXNcclxuICAgICAqIEBhcGlOYW1lIGdldEFsbEFydGljbGVcclxuICAgICAqIEBhcGlHcm91cCBBcnRpY2xlXHJcbiAgICAgKiBAYXBpU3VjY2VzcyB7T2JqZWN0W119IGxpc3RfYXJ0aWNsZSBMaXN0IG9mIGFydGljbGVzLlxyXG4gICAgICogQGFwaUVycm9yICg1MDIpIEVycm9yIEVycm9yIHRvIHJlcXVlc3QgZGF0YWJhc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBbGxBcnRpY2xlcyAoe3Jlc3BvbnNlfTogSHR0cENvbnRleHRDb250cmFjdCl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgQXJ0aWNsZS5maW5kKClcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBAYXBpIHtnZXR9IC9nZXRfYXJ0aWNsZXNfYnlfdHlwZSBSZXF1ZXN0IHNvbWUgYXJ0aWNsZXMgYnkgdHlwZVxyXG4gICAgICogQGFwaU5hbWUgZ2V0QXJ0aWNsZXNCeVR5cGVcclxuICAgICAqIEBhcGlHcm91cCBBcnRpY2xlXHJcbiAgICAgKiBAYXBpUGFyYW0ge1N0cmluZ30gYXJ0aWNsZV90eXBlIFR5cGUgb2YgYXJ0aWNsZXMuXHJcbiAgICAgKiBAYXBpU3VjY2VzcyB7T2JqZWN0W119IGxpc3RfYXJ0aWNsZSBMaXN0IG9mIGFydGljbGVzLlxyXG4gICAgICogQGFwaUVycm9yICg1MDIpIEVycm9yIEVycm9yIHRvIHJlcXVlc3QgZGF0YWJhc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBcnRpY2xlc0J5VHlwZSh7cmVxdWVzdCwgcmVzcG9uc2V9IDogSHR0cENvbnRleHRDb250cmFjdCl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgQXJ0aWNsZS5maW5kKHt0eXBlOnJlcXVlc3QuaW5wdXQoJ2FydGljbGVfdHlwZScpfSlcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBAYXBpIHtnZXR9IC9nZXRfYXJ0aWNsZXNfYnlfcmVzdG9yZXIgUmVxdWVzdCBzb21lIGFydGljbGVzIGJ5IHJlc3RvcmVyXHJcbiAgICAgKiBAYXBpTmFtZSBnZXRBcnRpY2xlc0J5UmVzdG9yZXJcclxuICAgICAqIEBhcGlHcm91cCBBcnRpY2xlXHJcbiAgICAgKiBAYXBpUGFyYW0ge1N0cmluZ30gcmVzdG9yZXJfaWQgSWQgb2YgcmVzdG9yZXIuXHJcbiAgICAgKiBAYXBpU3VjY2VzcyB7T2JqZWN0W119IGxpc3RfYXJ0aWNsZSBMaXN0IG9mIGFydGljbGVzLlxyXG4gICAgICogQGFwaUVycm9yICg1MDIpIEVycm9yIEVycm9yIHRvIHJlcXVlc3QgZGF0YWJhc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBcnRpY2xlc0J5UmVzdG9yZXIgKHtyZXF1ZXN0LCByZXNwb25zZX06SHR0cENvbnRleHRDb250cmFjdCl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgQXJ0aWNsZS5maW5kKHtyZXN0b3JlcjpyZXF1ZXN0LmlucHV0KFwicmVzdG9yZXJfaWRcIil9KVxyXG4gICAgICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDUwMilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBhcGkge3Bvc3R9IC9jcmVhdGVfYXJ0aWNsZSBDcmVhdGUgYSBuZXcgYXJ0aWNsZVxyXG4gICAgICogQGFwaU5hbWUgY3JlYXRlQXJ0aWNsZVxyXG4gICAgICogQGFwaUdyb3VwIEFydGljbGVcclxuICAgICAqIEBhcGlQYXJhbSAoQm9keSkge09iamVjdH0gYXJ0aWNsZSBBcnRpY2xlIG9iamVjdC5cclxuICAgICAqIEBhcGlTdWNjZXNzIHJlc3BvbnNlIEFydGljbGUgY3JlYXRlZC5cclxuICAgICAqIEBhcGlFcnJvciAoNTAyKSBFcnJvciBFcnJvciB0byByZXF1ZXN0IGRhdGFiYXNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlQXJ0aWNsZSAoe3JlcXVlc3QsIHJlc3BvbnNlfTpIdHRwQ29udGV4dENvbnRyYWN0KXtcclxuICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGF3YWl0IEFydGljbGUuY3JlYXRlKHJlcXVlc3QuYm9keSgpKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uub2soXCJBcnRpY2xlIGNyZWF0ZWRcIilcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyhlcnIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBhcGkge3B1dH0gL2VkaXRfYXJ0aWNsZSBFZGl0IGFuIGFydGljbGVcclxuICAgICAqIEBhcGlOYW1lIGVkaXRBcnRpY2xlXHJcbiAgICAgKiBAYXBpR3JvdXAgQXJ0aWNsZVxyXG4gICAgICogQGFwaVBhcmFtIHtTdHJpbmd9IGFydGljbGVfaWQgIElkIG9mIGFydGljbGUuXHJcbiAgICAgKiBAYXBpUGFyYW0gKEJvZHkpIHtPYmplY3R9IGFydGljbGUgQXJ0aWNsZSBvYmplY3QuXHJcbiAgICAgKiBAYXBpU3VjY2VzcyByZXNwb25zZSBBcnRpY2xlcyBlZGl0ZWQuXHJcbiAgICAgKiBAYXBpRXJyb3IgKDUwMikgRXJyb3IgdG8gcmVxdWVzdCBkYXRhYmFzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGVkaXRBcnRpY2xlICh7cmVxdWVzdCwgcmVzcG9uc2V9Okh0dHBDb250ZXh0Q29udHJhY3Qpe1xyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgYXdhaXQgQXJ0aWNsZS51cGRhdGVPbmUoe19pZDpyZXF1ZXN0LmlucHV0KCdhcnRpY2xlX2lkJyl9LCByZXF1ZXN0LmJvZHkoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLm9rKFwiQXJ0aWNsZSBlZGl0ZWRcIikgICBcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBhcGkge2RlbGV0ZX0gL2RlbGV0ZV9hcnRpY2xlIERlbGV0ZSBhbiBhcnRpY2xlXHJcbiAgICAgKiBAYXBpTmFtZSBkZWxldGVBcnRpY2xlXHJcbiAgICAgKiBAYXBpR3JvdXAgQXJ0aWNsZVxyXG4gICAgICogQGFwaVBhcmFtIHtTdHJpbmd9IGFydGljbGVfaWQgSWQgb2YgYXJ0aWNsZS5cclxuICAgICAqIEBhcGlTdWNjZXNzIHJlc3BvbnNlIEFydGljbGVzIGRlbGV0ZWQuXHJcbiAgICAgKiBAYXBpRXJyb3IgKDUwMikgRXJyb3IgdG8gcmVxdWVzdCBkYXRhYmFzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGRlbGV0ZUFydGljbGUgKHtyZXF1ZXN0LCByZXNwb25zZX06SHR0cENvbnRleHRDb250cmFjdCl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBhd2FpdCBBcnRpY2xlLmRlbGV0ZU9uZSh7X2lkOnJlcXVlc3QuaW5wdXQoJ2FydGljbGVfaWQnKX0pXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayhcIkFydGljbGUgZGVsZXRlZFwiKSAgXHJcbiAgICAgICAgfWNhdGNoKGVycil7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNTAyKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxufVxyXG4iXX0=